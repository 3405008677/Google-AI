# ============================================================
# Function Call / Tools 配置文件
# ============================================================
# 
# 统一管理所有工具定义（Function Calling Schema）
# 格式遵循 OpenAI/Gemini 的 function schema
#
# 使用方式：
#   from src.common.function_calls import get_tool, get_tools
#   
#   # 获取单个工具定义
#   tool = get_tool("get_current_datetime")
#   
#   # 获取多个工具
#   tools = get_tools(["web_search", "calculator"])
#
# ============================================================

tools:
  # === 时间日期工具 ===
  get_current_datetime:
    name: "get_current_datetime"
    description: |
      获取当前的日期和时间信息。
      当用户询问今天是几号、现在几点、今天星期几等时间相关问题时，
      必须调用此工具获取准确的时间信息。
    parameters:
      type: "object"
      properties:
        timezone:
          type: "string"
          description: "时区，如 'Asia/Shanghai', 'Asia/Taipei', 'UTC'"
          default: "Asia/Shanghai"
      required: []
    implementation:
      module: "src.tools.datetime_tool"
      class: "DateTimeTool"

  # === Tavily 搜索工具 ===
  tavily_search:
    name: "tavily_search"
    description: |
      使用 Tavily API 进行联网搜索，获取最新的网路信息、新闻、事实等。
      适用于需要获取实时信息或最新数据的场景。
    parameters:
      type: "object"
      properties:
        query:
          type: "string"
          description: "搜索查询关键词"
        max_results:
          type: "integer"
          description: "最大返回结果数量（1-20）"
          default: 5
        search_depth:
          type: "string"
          description: "搜索深度：basic（快速）或 advanced（深度）"
          enum: ["basic", "advanced"]
          default: "basic"
        include_answer:
          type: "boolean"
          description: "是否包含 AI 摘要"
          default: true
      required:
        - query
    implementation:
      module: "src.tools.search"
      class: "TavilySearchTool"

  # === 通用搜索工具（别名）===
  web_search:
    name: "web_search"
    description: "在互联网上搜索最新信息、新闻、事实等"
    parameters:
      type: "object"
      properties:
        query:
          type: "string"
          description: "搜索查询关键词"
        max_results:
          type: "integer"
          description: "最大返回结果数量"
          default: 5
      required:
        - query

  # === 数据分析工具 ===
  sql_query:
    name: "sql_query"
    description: "执行 SQL 查询以获取数据库中的数据"
    parameters:
      type: "object"
      properties:
        query:
          type: "string"
          description: "SQL 查询语句"
        database:
          type: "string"
          description: "目标数据库名称"
          default: "default"
      required:
        - query

  # === 计算工具 ===
  calculator:
    name: "calculator"
    description: "执行数学计算，支持基本运算和科学计算"
    parameters:
      type: "object"
      properties:
        expression:
          type: "string"
          description: "数学表达式，如 '2 + 2' 或 'sqrt(16)'"
      required:
        - expression

  # === 天气查询工具 ===
  get_weather:
    name: "get_weather"
    description: "获取指定城市的天气信息"
    parameters:
      type: "object"
      properties:
        city:
          type: "string"
          description: "城市名称，如 '台北' 或 'Tokyo'"
        unit:
          type: "string"
          description: "温度单位"
          enum: ["celsius", "fahrenheit"]
          default: "celsius"
      required:
        - city

  # === 文件操作工具 ===
  read_file:
    name: "read_file"
    description: "读取指定路径的文件内容"
    parameters:
      type: "object"
      properties:
        file_path:
          type: "string"
          description: "文件路径"
        encoding:
          type: "string"
          description: "文件编码"
          default: "utf-8"
      required:
        - file_path

  write_file:
    name: "write_file"
    description: "将内容写入指定文件"
    parameters:
      type: "object"
      properties:
        file_path:
          type: "string"
          description: "文件路径"
        content:
          type: "string"
          description: "要写入的内容"
        mode:
          type: "string"
          description: "写入模式"
          enum: ["overwrite", "append"]
          default: "overwrite"
      required:
        - file_path
        - content

  # === API 调用工具 ===
  http_request:
    name: "http_request"
    description: "发送 HTTP 请求调用外部 API"
    parameters:
      type: "object"
      properties:
        url:
          type: "string"
          description: "API URL"
        method:
          type: "string"
          description: "HTTP 方法"
          enum: ["GET", "POST", "PUT", "DELETE"]
          default: "GET"
        headers:
          type: "object"
          description: "请求头"
        body:
          type: "object"
          description: "请求体（用于 POST/PUT）"
      required:
        - url


# ============================================================
# Worker 工具配置
# ============================================================
# 定义每个 Worker 可使用的工具列表
# 
worker_tools:
  Researcher:
    - tavily_search
    - web_search
    - http_request
  
  DataAnalyst:
    - sql_query
    - calculator
  
  Writer: []  # Writer 不需要工具
  
  General:
    - get_current_datetime
    - calculator
    - get_weather

