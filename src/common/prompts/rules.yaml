# ============================================================
# 规则引擎配置 (Rule Engine)
# ============================================================
#
# 路径前缀: rules
# 用法: get_prompt("rules.default") 获取所有预设规则
#
# 规则引擎用于处理简单的非推理类指令，
# 基于正则匹配直接返回预设回答，不调用 LLM。
# ============================================================

# 是否启用规则引擎
enabled: true

# ============================================================
# 预设规则列表
# ============================================================
# 每条规则包含：
#   - pattern: 正则表达式（忽略大小写）
#   - answer: 匹配成功时返回的回答
#   - type: 规则类型（用于分类和日志）
#
# 注意：
#   - 正则表达式中的特殊字符需要转义
#   - 规则按顺序匹配，先匹配先返回
#   - answer 支持 Markdown 格式
# ============================================================

default:
  # 问候语
  - pattern: "^(你好|hello|hi|您好|早上好|下午好|晚上好)[\\s!！。，,]*$"
    answer: |
      你好！我是 GG后台系统助手 👋

      我可以帮您：
      - 📋 解答系统操作问题
      - 🔍 说明业务流程与规则
      - 🛠️ 排查常见报错原因

      请告诉我您遇到的问题？
    type: greeting

  # 身份询问
  - pattern: "^(你是谁|你叫什么|介绍.*自己|what.*your.*name|who.*are.*you)[\\s!！。，,?？]*$"
    answer: |
      我是 GG后台系统助手，您的元器件业务管家。

      我可以帮助您：
      - 解答 ERP 系统操作流程（销售、采购、库存、财务）
      - 解释业务术语和规则
      - 排查常见报错问题

      有什么可以帮您的？
    type: identity

  # 感谢
  - pattern: "^(谢谢|感谢|thank.*you|thanks|thx)[\\s!！。，,]*$"
    answer: "不客气！很高兴能帮助您。如果还有其他问题，随时可以问我。"
    type: thanks

  # 告别
  - pattern: "^(再见|拜拜|bye|goodbye|see.*you)[\\s!！。，,]*$"
    answer: "再见！祝您工作顺利 👋"
    type: goodbye

  # 帮助
  - pattern: "^(帮助|help|如何使用|怎么用|能做什么)[\\s!！。，,?？]*$"
    answer: |
      我是 GG后台系统助手，可以帮您：

      **系统操作**
      - 销售开单、采购入库、库存调拨等操作指引
      - 各模块功能说明

      **业务咨询**
      - 解释术语（如 D/C、MOQ、SPQ、L/T 等）
      - 说明业务流程和规则

      **问题排查**
      - 保存失败、无法出库等常见报错
      - 权限不足等问题处理

      请直接描述您的问题，我会尽力帮您解答！
    type: help

  # 清除历史（注意：实际清除逻辑需要在代码中实现）
  - pattern: "^(清除.*历史|清空.*历史|删除.*历史|clear.*history|reset.*history)[\\s!！。，,]*$"
    answer: "好的，已清除对话历史记录。"
    type: clear_history


# ============================================================
# 业务相关快捷规则
# ============================================================
# 可根据实际业务需求添加更多规则

business:
  # 查询库存（模糊）
  - pattern: "^(查库存|看库存|库存查询)[\\s!！。，,?？]*$"
    answer: |
      请提供更具体的信息：

      1. **型号查询**：请告诉我具体的型号（Part No.）
      2. **品牌概览**：请告诉我品牌名称（如 TI、ADI、ST）

      或者您可以直接前往系统【库存管理】→【库存查询】模块查看。
    type: inventory_query

  # 新建订单（模糊）
  - pattern: "^(新建订单|创建订单|开单)[\\s!！。，,?？]*$"
    answer: |
      请问您要创建哪种订单？

      - **销售订单 (SO)**：【销售管理】→【新建订单】
      - **采购订单 (PO)**：【采购管理】→【新建订单】

      请告诉我具体类型，我可以提供详细操作步骤。
    type: order_create


